ParentProfile = MMOGO_Pantheon_Base

; Remove below line to stop automatic replacement by newer versions of the app
AutoGeneratedVersion = 0

###############################################################################
## BASIC CONTROLS
##
## This control scheme is designed to emulate that used by the PS2 MMO "EQOA".
##
## Additional actions not included in EQOA like Jump, Sit, and mouse-dependent
## tasks like inventory management needed to be added. This was accomplished by
## assigning different actions for tapping vs holding a button, or to button
## combinations (usually holding L2, such as "L2+D-Pad" for camera zoom).
## Some buttons will also change their behavior based on a current context
## (namely Cursor Mode vs Camera Mode).
##
## Other buttons were swapped from EQOA's layout (like Circle and Triangle),
## but can be swapped back easily if preferred.
##
## Basic Controls:
##
## Left Analog Stick - Move character (turn or strafe depending on mode)
## Right Analog Stick - Move Camera / Turn / Move Mouse Cursor
## D-Pad - Navigate menus / hot bars / hotspots, (L2) Mouse wheel / zoom
##         (Hold) Edit macro in Macros menu
##
## Circle - (Tap) Esc/Cancel/Back, (Hold) Sit
## Square - Toggle Auto-attack
## Triangle - Use Ability / Switch to Action Mode
## X - Confirm menu selections / Switch to Cursor Mode / Left-click
##     (L2) Alt-click, (L1) Shift-click, (R1) Ctrl-click
##
## L1 - Target self/pet/group members (see TARGET GROUP section for details)
## R1 - Smart Target
## L2 - (Tap) Macros Menu, (Hold) Modify other buttons
## R2 - Right-click / Interact, (L2) Alt-right-click (sell), (Hold) Sprint/climb
##
## L3 - (Tap) Auto run, (L2) Lock movement (aka auto-strafe-run)
## R3 - Jump
## Start - Main Menu, (L2) Toggle Inventory, (L2+Hold) Toggle Bags
## Select - <unused>
###############################################################################

[Scheme]
Auto = Add CursorMode layer
LStick = MoveTurn
RStick = Mouse
Square = Attack
Tap Circle = Cancel
Hold Circle = Sit
Triangle = Replace CurrentMode with CameraMode
Press PS-X = Replace CurrentMode with CursorMode
L1 = Hold L1 layer
Tap L1 = TargetCycleGroup
R1 = Hold R1 layer
Tap R1 = SmartTarget, pause 100, Consider
L2 = Hold L2 layer
Tap L2 = Toggle Macros layer
R2 = RMB
Tap R2 = SignalRightClick
Tap L3 = AutoRun
Tap R3 = Jump
Start = Replace CurrentMode with MainMenu

; Alternate controls while holding L2
[Layer.L2]
DPad = MouseWheel
R2 = Alt-Right-Click
Tap R2 = Defer to lower layers
Tap L3 = Lock movement
Tap Start = Inventory
Hold Start = Bags

; This acts as a container layer to swap modes with a single "Replace Layer",
[Layer.CurrentMode]
Priority = 2
When TargetGroup# = Add QuickAssist layer
When TargetSelf = Remove QuickAssist layer
When Inventory = Add InvHotspots layer
When Bags = Add InvHotspots layer

; Just used to trigger combo layers - doesn't do anything on its own
[Layer.R1]
Auto = Do nothing


###############################################################################
## CAMERA MODE
##
## This mode can be accessed while in other modes by pressing Triangle.
##
## It allows controlling the camera with the right thumbstick and move+strafe
## with the left stick by activating Mouse Look (holding the right mouse
## button down continuously). You can also look around while using auto-run
## or auto-strafe-run (from L3 or L2+L3 respectively) WITHOUT turning your
## character by holding L2 while using the right thumbstick.
##
## Most importantly, it also gives access to navigating the hotbar via the
## D-pad and using the current selection by pressing Triangle.
##
## A reticle is displayed while in this mode at InteractPos (center screen)
## allowing you to know where mouse clicks will occur when tap R2.
## Tapping R2 left-clicks then right-clicks here, which can be used for
## opening doors, dealing with merchants/bank, and looting corpses without
## needing to switch to Cursor Mode first. This also does switch to Cursor
## Mode temporarily to facilitate looting, shopping, etc.
###############################################################################

[Layer.CameraMode]
Parent = CurrentMode
Mouse = Look
ShowMenus = Hotbar, InteractReticle
Auto = SignalCameraModeStarted
LStick = ${CamSteer ? MoveAndLook : MoveStrafe}
DPad = Select item in Hotbar menu w/ wrap
Triangle = Confirm current selection in Hotbar menu
Tap R2 = Interact
Hold R2 = Add Sprint layer
Release R2 = Remove Sprint layer
When Interact = Replace CurrentMode with InteractMode
When AltInteract = Replace CurrentMode with InteractMode
When LootTarget = Replace CurrentMode with InteractMode

[Layer.L2+CameraMode]
Tap R2 = AltInteract

; This doesn't start holding Sprint until hold R2 past an interact "tap"
[Layer.Sprint]
AutoLayers = Add ForceHoldSprintBriefly
Auto = Sprint

; This prevents the sprint key being being considered "tapped" by the game,
; which activates auto-sprint, by holding the key for a minimum time
[Layer.ForceHoldSprintBriefly]
Auto = Sprint
Hold Auto 600 = Remove this layer

; This allows quickly returning to action mode after tap R2 by just moving
; It also initially jumps the cursor to loot window for faster looting
[Layer.InteractMode]
Parent = CursorMode
Auto = Jump cursor to LootWindow1
When AutoRun = Replace CurrentMode with CameraMode
When Press LStick = Replace CurrentMode with CameraMode


###############################################################################
## CURSOR MODE
##
## This mode is usually accessed by pressing X or R2.
##
## It allows moving the mouse cursor using the right analog stick, while still
## allowing movement with left stick (just turning instead of strafing).
##
## X then acts as the left mouse button, and R2 as the right mouse button.
## Use L2+X for alt-click, L1+X for ctrl-click, and R1+X for shift-click, for
## cases where those are needed. L2+R2 will use alt-right-click for selling.
##
## The D-Pad is used as an alternate, faster method of moving the mouse that
## "jumps" the cursor in the direction pressed. It can actually be more
## accurate than using the right analog stick when used while the cursor is
## near active "hotspot" positions, which it will prefer to jump to directly.
## These hotspots are set to commonly-accessed positions such as item slots in
## the Loot Window and the Inventory window.
##
## While holding X (left-click), the left analog stick will also move the
## cursor (since your right thumb is busy holding X instead of right stick).
###############################################################################

[Layer.CursorMode]
Parent = CurrentMode
Mouse = Cursor
Hotspots = LootWindow, Hotbar
DPad = Select Hotspot
PS-X = LMB
Tap PS-X = SignalLeftClick
Press PS-X = Add DragLMB layer
Release PS-X = Remove DragLMB layer

[Layer.DragLMB]
Parent = CursorMode
LStick = Mouse

[Layer.L1+CursorMode]
Press PS-X = Defer to lower layers
PS-X = Shift-Click

[Layer.R1+CursorMode]
Press PS-X = Defer to lower layers
PS-X = Ctrl-Click

[Layer.L2+CursorMode]
Auto = Alt
Press PS-X = Defer to lower layers
PS-X = Alt-Click

; Makes sure a quick L1+X for shift-click doesn't activate auto-sprint
[Layer.L1+DragLMB]
AutoLayers = ForceHoldSprintBriefly

; Added when use Inventory keybind to use inv hotspots instead of Loot Window
[Layer.InvHotspots]
Hotspots = Inventory, Disable LootWindow
Priority = 4
When Interact = Remove this layer
When AltInteract = Remove this layer
When LootTarget = Remove this layer
When SignalCameraModeStarted = Remove this layer


###############################################################################
## TARGET GROUP
##
## Repeatedly tap L1 to cycle through targeting yourself and group members.
##
## Unfortunately, this app doesn't have any way of knowing your actual current
## group size, or what you might have targeted (since there are multiple ways
## of changing targets). This means that even when just in a 2-person group,
## you'll need to tap L1 5 times to cycle back to yourself. As a workaround for
## this, you can instead hold L1 and use the D-Pad:
##
## L1+Up/Down = Target prev/next group member
## L1+Right = Re-target last targeted group member (or their/your pet)
## L1+Left = Set group member as new "default" instead of yourself
##           (like main tank for healer or main assist for DPS)
##
## A visual indicator HUD element is used to show which group member was last
## targeted. That member will be used as the starting point for which to target
## next with Tap L1 or L1+Up/Down. The indicator will go away after using other
## commands that *could* result in a change of target (mouse clicks, cycle
## target keys, Esc to drop target, etc.). If the indicator is gone, the next
## L1 press will restart at the default group target (likely yourself).
##
## You can also hold L1 and press R1 to use the set 'Assist' KeyBind.
## Alternatively, the first time you tap R1 after targeting any group member
## (besides yourself) will use 'Assist' instead of 'TargetCycleNPC'
###############################################################################

[Layer.L1]
ShowMenus = TargetGroupDefault
R1 = Defer to lower layers
Tap R1 = Assist
DPad Up = TargetCycleGroup previous
DPad Down = TargetCycleGroup next
DPad Right = TargetCycleGroup repeat
DPad Left = Do nothing

[Layer.ShowLastGroupTarget]
ShowMenus = TargetGroupLast
Release Auto = Reset TargetCycleGroup
L1 = Defer to lower layers
Tap L1 = TargetCycleGroup
When SmartTarget = Remove this layer
When Interact = Remove this layer
When AltInteract = Remove this layer
When Assist = Remove this layer
When Cancel = Remove this layer
When SignalLeftClick = Remove this layer
When SignalRightClick = Remove this layer

; Once last target is displayed, don't show default target while
; holding <TargetGroup> until/unless change it by pressing D-Left
[Layer.L1+ShowLastGroupTarget]
ShowMenus = Hide TargetGroupDefault
DPad Left = Add ShowDefaultGroupTarget layer

; Show changed default target from pressing <TargetGroup>+D-Left
[Layer.ShowDefaultGroupTarget]
Parent = L1+ShowLastGroupTarget
ShowMenus = Show TargetGroupDefault
Auto = Set TargetCycleGroup default to last key pressed
DPad Left = Set TargetCycleGroup default to last key pressed

; Quick Assist by tapping <SmartTarget> after targeting a group member
; Also the method by which ShowLastGroupTarget activates (as parent layer)
[Layer.QuickAssist]
Parent = ShowLastGroupTarget
When Assist = Remove this layer
R1 = Defer to lower layers
Tap R1 = Assist


###############################################################################
## MACROS MENU
##
## This special menu appears when tap (but not hold!) L2.
##
## Basically, each command is assigned a sequence of direction presses, by
## virtue of D-pad taps instantly selecting and confirming the command or
## sub-menu in the direction pressed.
##
## Edit/add/remove macros/sub-menus by holding a D-pad direction for a time.
###############################################################################

[Layer.Macros]
Parent = CurrentMode
Priority = 3
ShowMenus = Macros
Auto = Reset Macros menu
Tap DPad = Choose option in Macros menu, then close it
Hold DPad 800 = Edit Macros menu option in direction
Circle = Defer to lower layers
Tap Circle = Go back in Macros menu
Press L2 = Remove this layer
L2 = Hold L2 layer
Triangle = Replace CurrentMode with CameraMode
PS-X = Replace CurrentMode with CursorMode
Start = Replace CurrentMode with MainMenu


###############################################################################
## MAIN MENU
##
## Press Start/Options/whatever to bring up the Main Menu controlled here.
## D-pad Up/Down scrolls through the menu options. Use X to confirm, and
## Circle to back out of a sub-menu or to close the menu entirely.
##
## Some menu options will open an in-game UI window, like your Inventory.
## To interact with these, pressing RStick in any direction will exit the
## menu and switch to Cursor Mode. Because of this, Mouse Look is disabled
## and you must use the left analog stick to steer while using this menu.
###############################################################################

[Layer.MainMenu]
Parent = CurrentMode
ShowMenus = MainMenu, OverlayMenu
Auto = Reset MainMenu
DPad = Select in MainMenu using wrapping
PS-X = Confirm current selection in MainMenu
Circle = Defer to lower layers
Tap Circle = Go back in MainMenu
L2 = Defer to lower layers
Tap L2 = Replace this layer with Macros
RStick = Replace CurrentMode with CursorMode
R2 = Replace CurrentMode with CursorMode
Start = Replace CurrentMode with CursorMode
; Restore cursor to non-hidden status when about to exit the game
When Camp = Replace CurrentMode with CursorMode
When QuickExit = Replace CurrentMode with CursorMode

[Layer.OverlayMenu]
Parent = MainMenu
Mouse = Hide
Auto = Confirm OverlayMenu
Release Auto = Reset OverlayMenu
DPad = Select in OverlayMenu w/ wrap
PS-X = Confirm current selection in OverlayMenu
Circle = Defer to lower layers
Tap Circle = Go back in OverlayMenu


###############################################################################
## KEY BINDS
###############################################################################

[KeyBinds]
Assist = /assist
Interact = Jump cursor to InteractClickPos, Right-Click
AltInteract = Jump cursor to InteractClickPos, Alt-Right-Click
LootTarget = /loot
Camp = /camp
QuickExit = Alt-F4

; Signal-only key binds used to automatically add or remove certain layers
SignalLeftClick = Signal Only
SignalRightClick = Signal Only
SignalCameraModeStarted = Signal Only


###############################################################################
## VARIABLES / SETTINGS
###############################################################################

[Variables]
; This allows auto camera rotation when strafe left or right, so can fully
; steer using only the left analog stick while this is active. Best to turn
; off if prefer to play in first-person view.
CamSteer = On
; This is offset a bit from true center so don't click on your own character.
; Override in custom profile (perhaps one per character) to accomodate your
; character size and preferred camera zoom (or just CX, CY for 1st-person).
InteractPos = 54%, 40%

[Hotspots]
InteractClickPos = ${InteractPos}


###############################################################################
## MENUS
###############################################################################

[Menu.MainMenu]
Style = Bar
Position = 7, 2
Alignment = L, T
TitleHeight = 0
ItemSize = 38, 38
GapSize = -4, 0
ItemRGB = 255, 0, 255
BorderRGB = 255, 0, 255
SelectedBorderRGB = 230, 230, 50
Mouse = Click
Back = Replace CurrentMode with CursorMode
Default = 3
U = : Esc
D = : Add OverlayMenu layer
1 = : 
2 = : 
3 = : Add InvHotspots layer
4 = : 
5 = : 
6 = : 
7 = : 
8 = : Replace CurrentMode with CursorMode

[Menu.OverlayMenu]
Title = Overlay
Style = Grid
GridWidth = 3
Position = 4, 42
Alignment = L, T
FadeInTime = 125
FadeOutTime = 250
Back = Replace CurrentMode with CursorMode
1 = Menu

[Menu.OverlayMenu.Menu]
Back = Remove OverlayMenu layer
U = : Remove OverlayMenu layer
D = : Remove OverlayMenu layer
1 = "Cam Steer: ${CamSteer}": Set CamSteer to ${CamSteer ? Off : On}
2 = "Group Size: ${GroupSize}": .Menu.GroupSize
3 = Layout: Edit UI Layout
4 = Profile: Change Profile
5 = Toggle Windowed: SwapWindowMode
6 = Quit

[Menu.OverlayMenu.Menu.GroupSize]
Title = Group Size: ${GroupSize}
Default = ${GroupSize}
1-6 = #: Temporarily set GroupSize to #

[Menu.OverlayMenu.Menu.Quit]
1 = Camp: Camp
2 = Alt-F4
3 = Close Overlay

[Menu.OverlayMenu.Menu.Quit.Alt-F4]
1 = Cancel: ..
2 = Confirm: QuickExit

[Menu.OverlayMenu.Menu.Quit.Close Overlay]
1 = Cancel: ..
2 = Confirm: Quit App

[Menu.Hotbar]
Style = Highlight
SelectedBorderRGB = 230, 230, 50
Default = Hotbar1
Hotbar1 = : Technique1
Hotbar2 = : Technique2
Hotbar3 = : Technique3
Hotbar4 = : Technique4
Hotbar5 = : Utility1
Hotbar6 = : Utility2
Hotbar7 = : Utility3
Hotbar8 = : Utility4
Hotbar9 = : Utility5
Hotbar10 =: Utility6
Hotbar11 =: Action1
Hotbar12 =: Action2
Hotbar13 =: Action3
Hotbar14 =: Action4
Hotbar15 =: Action5
Hotbar16 =: Action6
Hotbar17 =: Action7
Hotbar18 =: Action8
Hotbar19 =: Attack

[Menu.InteractReticle]
Type = HUD
Position = ${InteractPos}
Alignment = CX, CY
ItemType = Dot
ItemSize = ${ResScale * 9}, ${ResScale * 9}
BorderSize = 0
ItemRGB = 255, 255, 255
MaxAlpha = 128

[Menu.TargetGroupLast]
Type = KeyBindCycleLast
KeyBindCycle = TargetCycleGroup
ItemSize = 14, 14
Alignment = CX, CY
Priority = 2
ItemType = Circle
BorderSize = 1
BorderRGB = 10, 10, 10
ItemRGB = 240, 240, 40
FadeOutTime = 250

[Menu.TargetGroupDefault]
Type = KeyBindCycleDefault
KeyBindCycle = TargetCycleGroup
ItemSize = 20, 20
Alignment = CX, CY
ItemType = Circle
Priority = 1
BorderSize = 4
BorderRGB = 200, 200, 200
ItemRGB = 40, 40, 40
FadeInDelay = 500
FadeInTime = 125
FadeOutDelay = 500
FadeOutTime = 650

[Menu.Macros]
Style = 4Dir
ItemType = Rect
Position = 50%, 2%
ItemSize = 400, 60
TitleHeight = 35
FontSize = 26
FontWeight = 700
BorderSize = 6
Alignment = C, T
Priority = 5
FadeInTime = 125
FadeOutTime = 250
Back = Remove Macros layer
U = Quick
L = Commands
R = Group
D = Social

[Menu.Macros.Quick]
U = Location: /loc
L = Warning
R = Incoming: /g Incoming -- %t -- !
D = Loot: LootTarget

[Menu.Macros.Quick.Warning]
U = Help!: >I need HELP!! Please save me!
L = Pop: /g Pop!
R = Adds: /g Add!
D = TRAIN!: /say Look out!!! TRAIN following me!

[Menu.Macros.Commands]
U = Drag Corpse: /corpse
L = Pet
R = More...
D = Status

[Menu.Macros.Commands.Pet]
U = Follow: /petfollow
L = Attack: /petattack
R = Back: /petback
D = More Pet...

[Menu.Macros.Commands.Pet.More Pet...]
U = Dismiss: /petdismiss
L = Guard: /petguard
R = :
D = Stay: /petstay

[Menu.Macros.Commands.Status]
U = :
L = Location: /loc
R = Zone: /zonename
D = Time: /time

[Menu.Macros.Commands.More...]
U = Rand 100: /rand 100
L = Stuck: /stuck
R = Trade: /trade
D = Skip loot: /skip

[Menu.Macros.Group]
U = Manage
L = Low Mana: /g Low on mana (< 25%)!
R = :
D = Out of Mana: /g Out of mana!!

[Menu.Macros.Group.Manage]
U = Invite: /invite
L = LFG
R = Leader: /leader
D = Leave: /leave

[Menu.Macros.Group.Manage.LFG]
U = LFG On: /lfg on
L = Check: /who lfg
R = Check All: /who all lfg
D = LFG Off: /lfg off

[Menu.Macros.Social]
U = Who: /who
L = Friend: /friend
R = Responses
D = Emotes

[Menu.Macros.Social.Responses]
U = Thanks: >Thank you!!
L = Sorry: >Sorry!! :(
R = More...
D = NP: >No problem!

[Menu.Macros.Social.Responses.More...]
U = :
L = :
R = :
D = :

[Menu.Macros.Social.Emotes]
U = Wave: /wave
L = Point: /point
R = Bow: /bow
D = More...

[Menu.Macros.Social.Emotes.More...]
U = :
L = :
R = :
D = :
