ParentProfile = MMOGO_ECO_Base

# Remove below line to stop automatic replacement by newer versions of the app
AutoGeneratedVersion = 0

###############################################################################
##	CONTROL SCHEME
##
##	This control scheme is designed to emulate that used by the PS2 MMO "EQOA".
##
##	Of course, ECO requires several more actions than EQOA, such as Jump, Duck,
##	and Sit, and has some actions that absolutely require a mouse cursor, such
##	as inventory management. Therefore extra actions needed to be added to
##	existing buttons, and some had to be moved around a bit to make room.
##
##	To handle all the extra actions needed, some buttons perform different
##	actions for being tapped (pressed and released again quickly) vs held for
##	a brief moment. Other actions may also be accessed by holding a modifier
##	button (usually L2) while pressing a button, such as using L2+R3 to Duck.
##	Finally, some buttons change function based on a current "mode" - primarily
##	"Cursor Mode" vs "Action Mode", but also some menu-controlling modes.
##
##	For EQOA players: I also swapped some of the face buttons around to match
##	what I'm used to for modern games. Circle and Triangle were swapped so that
##	Circle is Back/Cancel and Triangle is for using abilities/etc. X and Square
##	were also swapped with Square being attack (technically toggle auto-attack)
##	and, to replace the "interact" button, X acts as the left mouse button.
##	You can quickly swap buttons in your profile using something like:
##	[Gamepad]
##	Triangle = Circle
##	Circle = Triangle
##	Square = PS_X
##	PS_X = Square
##	(beware that this will make menus use Square as the confirm button, so you
##	may want to change layer button assignments directly to adjust that)
##
##	Basic Controls:
##
##	Left Analog Stick - Move character (turn or strafe depending on mode)
##	Right Analog Stick - Move Camera / Turn / Move Mouse Cursor
##	D-Pad - Navigate menus / abilities / hotspots, (L2) Mouse wheel / zoom
##			(Hold) Edit macro in Macros menu
##
##	Circle - (Tap) Esc/Cancel/Back/Options Menu, (Hold) Sit
##	Square - Toggle Auto-attack
##	Triangle - Use Ability / Switch to Action Mode
##	X - Confirm menu selections / Switch to Cursor Mode / Left-click
##		(L2) Alt-click, (L1) Ctrl-click, (R1) Shift-click
##
##	L1 - Target self/pet/group members (see TARGET GROUP section for details)
##	R1 - Cycle NPC targets
##	L2 - (Tap) Macros Menu, (Hold) Modify other buttons
##	R2 - Right-click / Use/Loot Center Screen
##
##	L3 - (Tap) Auto run, (L2) Lock movement (aka auto-strafe-run)
##	R3 - Jump, (L2) Duck
##	Start - Main Menu, (L2) Toggle Inventory, (L2+Hold) Toggle Bags
##	Select - Toggle Character menu
###############################################################################

[Scheme]
Auto = Add CursorMode layer
LStick = Move
RStick = Mouse
Square = Attack
Tap Circle = Cancel
Hold Circle = Sit
Triangle = Replace CurrentMode with ActionMode
Press PS_X = Replace CurrentMode with CursorMode
L1 = Hold L1 layer
Tap L1 = TargetGroup default
R1 = Hold R1 layer
Tap R1 = TargetCycleNPC
L2 = Hold L2 layer
Tap L2 = Toggle Macros layer
R2 = RMB
Tap R2 = SignalRightClick
Tap L3 = AutoRun
R3 = Jump
Start = Replace CurrentMode with MainMenu
Select = Character

# Alternate controls while holding L2
[Layer.L2]
DPad = MouseWheel
Just Tap L3 = Lock movement
R3 = Crouch
Tap Start = Inventory
Hold Start = Bags

# This acts as a container layer to swap modes with a single "Replace Layer",
[Layer.CurrentMode]
Priority = 2
When TargetGroup = Add QuickAssist layer
When TargetGroup1 = Remove QuickAssist layer

# Just used to trigger combo layers - doesn't do anything on its own
[Layer.R1]
Auto = Do nothing


###############################################################################
##	ACTION MODE
##
##	This mode can be accessed from most other modes by pressing Triangle.
##	It allows controlling the camera with the right thumbstick and move+strafe
##	with the left stick by activating Mouse Look (holding the right mouse
##	button down continuously). This allows for finer camera control than
##	mapping the right analog stick to the digital camera control keys.
##
##	Most importantly, it also gives access to navigating the hotbar via the
##	the D-pad and using the current selection by pressing Triangle.
##
##	A reticle is displayed while in this mode at the CenterScreen hotspot,
##	which can be used to know where mouse clicks will occur when tap R2.
##	Tapping R2 left-clicks then right-clicks here, which can be used for
##	opening doors, dealing with merchant/bank, and looting corpses without
##	needing to switch to Cursor Mode first. It also does itself switch to
##	Cursor Mode temporarily to facilitate looting, shopping, etc, however,
##	once enter Cursor Mode by tapping R2, moving with LStick automatically
##	returns back to Action Mode.
###############################################################################

[Layer.ActionMode]
Parent = CurrentMode
Mouse = Look
HUD = Hotbar, CenterScreenReticle
Auto = SignalActionModeStarted
LStick = MoveStrafe
DPad = Select item in Hotbar menu w/ wrap
Triangle = Confirm current selection in Hotbar menu
Tap R2 = Interact
When Interact = Replace CurrentMode with InteractMode
When LootTarget = Replace CurrentMode with InteractMode

# This allows quickly returning to action mode after tap R2 by just moving
# It also initially jumps the cursor to loot window for faster looting
[Layer.InteractMode]
Parent = CursorMode
Auto = Jump cursor to LootWindow1
When AutoRun = Replace CurrentMode with ActionMode
When Press LStick = Replace CurrentMode with ActionMode


###############################################################################
##	CURSOR MODE
##
##	This mode can be accessed in multiple ways, but the simplest is to press X.
##	It allows moving the mouse cursor using the right analog stick, while still
##	allowing movement with left stick (but turning instead of strafing).
##
##	It sets X to click the left mouse button, and R2 the right mouse button.
##	Use L2+X for alt-click, L1+X for ctrl-click, and R1+X for shift-click for
##	cases where those are needed (like getting single items from a stack).
##
##	The D-Pad is used to quickly jump the mouse cursor to defined "hotspots"
##	(which is why the Hotbar Menu is disabled in this mode), which can make
##	navigating some UI windows easier (namely the Loot and Inventory windows).
##
##	Since both X and R-Stick are used by your right thumb, using them together
##	for left-click-and-drag can be quite awkward. To help with this, while
##	holding X the left analog stick changes to controlling the mouse cursor.
###############################################################################

[Layer.CursorMode]
Parent = CurrentMode
Mouse = Cursor
Hotspots = Character Inventory LootWindow BagA BagB BagC BagD BagE BagF BagG BagH
DPad = Select Hotspot
PS_X = LMB
Tap PS_X = SignalLeftClick
Press PS_X = Add DragLMB layer
Release PS_X = Remove DragLMB layer

[Layer.DragLMB]
Parent = CursorMode
LStick = Mouse

[Layer.CursorMode+L1]
Just PS_X = Ctrl-Click

[Layer.CursorMode+R1]
Just PS_X = Shift-Click

[Layer.CursorMode+L2]
Just PS_X = Alt-Click


###############################################################################
##	TARGET GROUP
##
##	Repeatedly tap L1 to cycle through targeting yourself and group members.
##
##	Unfortunately, this app doesn't have any way of knowing your actual current
##	group size, or what you might have targeted (since there are multiple ways
##	of changing targets). This means that even when just in a 2-person group,
##	you'd need to tap L1 5 times to cycle back to yourself. It also means it is
##	possible to target yourself with L1, then click on another target, and then
##	press L1 again and it will target group member #2 (no one if solo!) when you
##	would expect it to target yourself again.
##
##	To help solve the first problem, you can instead hold L1 and use the D-Pad
##	for additional targeting options:
##
##	L1+Up/Down = Target prev/next group member
##	L1+Right = Re-target last targeted group member (or their/your pet)
##	L1+Left = Set group member as new "default" instead of yourself
##		(like main tank for healer or main assist for DPS)
##
##	For the second problem, a visual indicator HUD element is used to show
##	which group member was last targeted. That member will be used as the
##	starting point for which to target next with Tap L1 or L1+Up/Down. 
##	The indicator will go away after using certain other commands that *could*
##	result in a change of target (mouse clicks, target N/PC hotkeys, Esc to
##	drop target, etc.) - though the app has no way of knowing for sure if these
##	actually *did* change targets. Once this indicator is gone, the next L1
##	press will restart at the default group target.
##
##	You can also hold L1 and press R1 to use the set 'Assist' KeyBind.
##	Alternatively, the first time you tap R1 after targeting any group member
##	besides yourself will use 'Assist' instead of 'TargetCycleNPC'
###############################################################################

[Layer.L1]
HUD = TargetGroupDefault
Just Tap R1 = Assist
DPad Up = Press previous key in TargetGroup array w/ wrapping
DPad Down = Press next key in TargetGroup array w/ wrapping
DPad Right = Re-press last key in TargetGroup array
DPad Left = Do nothing

[Layer.ShowLastGroupTarget]
HUD = TargetGroupLast
Release Auto = Reset last key in TargetGroup array to default
Just Tap L1 = Press next key in TargetGroup array w/ wrapping
When TargetCycleNPC = Remove this layer
When TargetNearestNPC = Remove this layer
When Interact = Remove this layer
When Assist = Remove this layer
When Cancel = Remove this layer
When SignalLeftClick = Remove this layer
When SignalRightClick = Remove this layer

# Once last target is displayed, don't show default target while
# holding L1 until/unless change it by pressing L1+Left
[Layer.ShowLastGroupTarget+L1]
HUD = Hide TargetGroupDefault
DPad Left = Add ShowDefaultGroupTarget layer

# Show changed default target from pressing L1+Left
[Layer.ShowDefaultGroupTarget]
Parent = ShowLastGroupTarget+L1
HUD = Show TargetGroupDefault
Auto = Set TargetGroup array default to last key pressed
DPad Left = Set TargetGroup array default to last key pressed

# Quick Assist by tapping R1 after targeting a group member with L1
# Also the method by which ShowLastGroupTarget activates (as parent layer)
[Layer.QuickAssist]
Parent = ShowLastGroupTarget
When Assist = Remove this layer
Just Tap R1 = Assist


###############################################################################
##	MACROS MENU
##
##	This is used when tap L2 to display/control the Macros (Quick Chat) menu.
##	Basically, each command is assigned a sequence of direction presses, by
##	virtue of D-pad taps instantly selecting and confirming the command or
##	sub-menu in the direction pressed.
##
##	Edit/add/remove macros/sub-menus by holding a direction for a time.
##
##	You can repeatedly use the same macro by pressing and holding L2 again
##	(after tapping it to bring up the menu initially) which prevents the menu
##	from closing when selecting an option with the D-pad - instead closing when
##	release L2. You can also use the face buttons as an alternate to the D-pad
##	when doing this, allowing you to spam a macro while still being able to
##	move around with your thumb on the left analog stick intsead of the D-Pad.
###############################################################################

[Layer.Macros]
Parent = CurrentMode
Priority = 3
HUD = Macros
Auto = Reset Macros menu
Tap DPad = Choose option in Macros menu, then close it
Hold DPad 800 = Edit Macros menu option in direction
Just Tap Circle = Go back in Macros menu
Just Release L2 = Remove this layer
Triangle = Replace CurrentMode with ActionMode
PS_X = Replace CurrentMode with CursorMode
Start = Replace CurrentMode with MainMenu

[Layer.Macros+L2]
DPad = Choose option in Macros menu
FPad = Choose option in Macros menu


###############################################################################
##	MAIN MENU
##
##	Press Start/Options/whatever to bring up the Main Menu controlled here.
##	D-pad scrolls through the menu options. Use X to confirm, and Circle
##	to back out of a sub-menu or to close the menu entirely.
##
##	Some menu options will open an in-game UI window, like your Inventory.
##	To interact with these, pressing RStick in any direction will exit the
##	menu and switch to Cursor Mode. Because of this, Mouse Look is disabled
##	and you must use the left analog stick to steer while using this menu.
###############################################################################

[Layer.MainMenu]
Parent = CurrentMode
Mouse = Cursor
HUD = MainMenu, OverlayMenu
Auto = Reset MainMenu with mouse
DPad = Select in MainMenu using wrapping and mouse
PS_X = Confirm current selection in MainMenu w/ mouse click
Just Tap Circle = Go back in MainMenu
Just Tap L2 = Replace this layer with Macros
RStick = Replace CurrentMode with CursorMode
R2 = Replace CurrentMode with CursorMode
Start = Replace CurrentMode with CursorMode
# Restore cursor to non-hidden status when about to exit the game
When Camp = Replace CurrentMode with CursorMode
When QuickExit = Replace CurrentMode with CursorMode
# Restore cursor to non-hidden status when go to edit UI layout

[Layer.OverlayMenu]
Parent = MainMenu
Mouse = Hide
Auto = Reset OverlayMenu
DPad = Select in OverlayMenu
DPad Right = Remove this layer
DPad Left = Remove this layer
PS_X = Confirm current selection in OverlayMenu
Just Tap Circle = Go back in OverlayMenu

[Layer.EditUILayout]
Parent = CursorMode
Auto = Edit UI Layout


###############################################################################
##	KEY BINDS
###############################################################################

[KeyBinds]
Assist = LClick at AssistButton
LootTarget = /loot
Camp = /camp
QuickExit = Alt-F4
Interact = Jump cursor to CenterScreen, Left-Click, Right-Click
CloseBook = MoveForward
HotButtonPageUp = LClick at HotButtonPageUp
HotButtonPageDown = LClick at HotButtonPageDown
# Signal-only key binds used to automatically add or remove certain layers
SignalLeftClick = Signal Only
SignalRightClick = Signal Only
SignalActionModeStarted = Signal Only


###############################################################################
##	HUD ELEMENTS
###############################################################################

[HUD.CenterScreenReticle]
Type = Hotspot
Hotspot = CenterScreen
Position = +0, +0
Alignment = CX, CY
ItemType = Dot
Size = 6, 6
BorderSize = 0
ItemRGB = 255, 255, 255
MaxAlpha = 128

[HUD.TargetGroupLast]
Type = KeyBindArrayLast
KeyBindArray = TargetGroup
Position = +0, +0
Size = 14, 14
Alignment = CX, CY
Priority = 2
ItemType = Circle
BorderSize = 1
BorderRGB = 10, 10, 10
ItemRGB = 240, 240, 40
FadeOutTime = 250

[HUD.TargetGroupDefault]
Type = KeyBindArrayDefault
KeyBindArray = TargetGroup
Position = +0, +0
Size = 20, 20
Alignment = CX, CY
ItemType = Circle
Priority = 1
BorderSize = 4
BorderRGB = 200, 200, 200
ItemRGB = 40, 40, 40
FadeInDelay = 500
FadeInTime = 125
FadeOutDelay = 500
FadeOutTime = 650


###############################################################################
##	MENUS
###############################################################################

[Menu.MainMenu]
Style = Bar
Position = 4, 4
Alignment = L, T
ItemSize = 40, 46
GapSize = -4, 0
ItemRGB = 255, 0, 255
BorderRGB = 255, 0, 255
SelectedBorderRGB = 230, 230, 50
Back = Replace CurrentMode with CursorMode
D = : Add OverlayMenu layer
1 = :
2 = :
3 = : 
4 = :
5 = :
6 = :
7 = :
8 = :

[Menu.OverlayMenu]
Style = List
Position = 0, 54
Alignment = L, T
ItemSize = 128, 32
FontSize = 10
FadeInTime = 125
FadeOutTime = 250
Back = Replace CurrentMode with CursorMode
1 = Overlay Profile: Change Profile
2 = Overlay Layout: Replace CurrentMode with EditUILayout
3 = Quit

[Menu.OverlayMenu.Quit]
1 = Camp: Camp
2 = Alt-F4
3 = Close Overlay

[Menu.OverlayMenu.Quit.Alt-F4]
1 = Cancel: ..
2 = Confirm: QuickExit
 
[Menu.OverlayMenu.Quit.Close Overlay]
1 = Cancel: ..
2 = Confirm: Quit App

[Menu.Hotbar]
Style = Bar
Position = CX+3, B-3
Alignment = CX, B
ItemSize = 48, 48
GapSize = 3, 0
ItemRGB = 255, 0, 255
BorderRGB = 255, 0, 255
SelectedBorderRGB = 230, 230, 50
1 = : HotButton1
2 = : HotButton2
3 = : HotButton3
4 = : HotButton4
5 = : HotButton5
6 = : HotButton6
7 = : HotButton7
8 = : HotButton8
9 = : HotButton9
10 =: HotButton10
U = : HotButtonPageUp
D = : HotButtonPageDown

[Menu.Macros]
Style = 4Dir
ItemType = Rect
Position = 50%, 10
ItemSize = 230, 40
FontSize = 16
FontWeight = 700
BorderSize = 4
Alignment = C, T
Priority = 5
FadeInTime = 125
FadeOutTime = 250
Back = Remove Macros layer
U = Quick
L = Commands
R = Group
D = Social

[Menu.Macros.Quick]
U = Hail: Hail
L = Warning
R = Incoming: /g Incoming -- %t -- !
D = Loot: LootTarget

[Menu.Macros.Quick.Warning]
U = Help!: >HELP!! Get 'em off me!
L = Pop: /g Pop!
R = Adds: /g Add!
D = TRAIN!: /shout TRAIN TO ZONE!!

[Menu.Macros.Commands]
U = WhoTarget: /whotarget
L = Drag Corpse: /corpse
R =
D =

[Menu.Macros.Group]
U = Manage
L = 
R = Follow: /follow
D = Out of Mana: /g Out of mana!!

[Menu.Macros.Group.Manage]
U = Invite / Join: /invite
L = LFG
R = Make Leader: /makeleader
D = Leave: /leave

[Menu.Macros.Group.Manage.LFG]
U = LFG On: /lfg on
D = LFG Off: /lfg off

[Menu.Macros.Social]
U = Who: /who
L = Friends: /friends
R = Responses
D = Emotes

[Menu.Macros.Social.Responses]
U = Thanks: >Thank you!!
L = Sorry: >Sorry!! :(
R = More...
D = NP: >No problem!

[Menu.Macros.Social.Emotes]
U = Wave: /wave
L = Point: /point
R = Bow: /bow
D = More...
