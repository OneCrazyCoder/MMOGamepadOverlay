ParentProfile = MMOGO_P99_Base

[KeyBinds]
# These override the ones in the ParentProfile specified above
# Update these (and include any others) to match your actual key binds
OpenBags =
CloseBags =
# Probably best to set this to use a hotbutton instead
Assist = /assist
CampToDesktop = /camp desktop
QuickExit = /exit
# Auto-consider targets as they are targeted
TargetPC = F7, pause 100, C
TargetNPC = F8, pause 100, C


###############################################################################
##	CONTROL SCHEME
##
##	This control scheme is designed to emulate EQOA as much as possible.
##
##	Of course, EQ1 requires several more actions than EQOA, such as Jump, Duck,
##	Sit, and has some functions that absolutely require a mouse cursor, like
##	targeting and looting corpses. Therefore extra functions needed to be added
##	to existing buttons, and some had to be moved around a bit to make room.
##
##	To handle all the extra functions needed, each button can perform up to 3
##	actions at any time, accessed by a quick tap, a brief hold, or pressing it
##	while holding L2 (which acts like a modifier key while held). Some buttons
##	also change functionality based on a current "mode", primarily Cursor Mode
##	vs Mouse Look + Abilities mode.
##
##	As much as this was inspired by EQOA, one technically unnecessary change
##	was swapping Circle and Triangle, so Circle is Back/Cancel and Triangle is
##	for using abilities & tool belt. It should be easy enough to search this
##	file for "Circle" and "Triangle" and swap them back though.
##
##	Attack was also changed from a tap to requiring a brief hold to reduce the
##	chance of accidentally attacking a friendly NPC, as well as being moved to
##	Square (since there isn't really a "talk to NPC" button in EQ1), freeing up
##	X to be used for switching to Cursor Mode and clicking with the mouse.
##	Since EQ only has auto-attacking as an option anyway, holding Square
##	briefly to initiate it isn't as cumbersome as it may sound.
##
##	Cursor Mode starts on by default to help with navigating initial screens
##	like login and character select. Once in-game, tap Triangle to turn it off.
##
##	Basic Controls:
##
##	Left Analog Stick - Move character (turn or strafe depending on mode)
##	Right Analog Stick - Move Camera / Turn/ Move Mouse Cursor
##	D-Pad - Navigate menus / abilities / hotspots, (L2) Mouse wheel / zoom
##
##	Circle - (Tap) Cancel/Back, (Hold) Sit
##	Square - (Hold) Auto-attack, (Tap) Use Center Screen (merchants/doors/etc) 
##	Triangle - Use Ability / Exit Cursor Mode
##	X - Confirm menu selections / Start Cursor Mode / Left-Click
##		(L2) Alt-click, (L1) Ctrl-click, (R1) Shift-click
##
##	L1 - Target self/group members (see TARGET GROUP layer comments)
##	R1 - (Tap) Target NPCs, (Hold) Hail, (L2) Target PCs, (L2+Hold) Consider
##	L2 - (Tap) Macros Menu, (Hold) Modifies other buttons & shows text labels
##	R2 - Loot Center Screen / Right-Click, (L2) Left-click-drag w/ RStick
##
##	L3 - (Tap) Auto run, (Hold) Re-center 1st-person camera
##	R3 - Jump, (L2) Duck
##	Start - Main Menu, (L2) Toggle Inventory, (L2+Hold) Toggle Bags
##	Select - Change camera mode
##
##	NOTE: Menus (including the Abilities list) can be edited during play by
##	holding the confirm button for that menu for an extended time (D-Pad for
##	Macros, Triangle for Abilities, X for Main Menu).
###############################################################################

[Scheme]
Auto = Add CursorMode layer
LStick = Move
RStick = Mouse

# Used as a template for other layers to override menu controls
[Layer.BaseControls]
Tap Square = UseCenterScreen
Hold Square = Attack
Tap Circle = Cancel
Hold Circle = Add Sit layer
Triangle = Replace CurrentMode with Abilities
PS_X = Replace CurrentMode with CursorMode
L2 = Hold L2 layer
Tap L2 = Toggle Macros layer
Start = Replace CurrentMode with MainMenu

# This acts as a container layer to swap modes with a single "Replace Layer"
[Layer.CurrentMode]
Include = BaseControls
Tap L1 = TargetGroup default
L1 = Hold TargetGroup layer
Tap R1 = TargetNPC
Hold R1 = Hail
Tap L3 = Toggle AutoRun layer
Hold L3 = CenterView
R3 = Jump
Select = CameraMode

# This layer modifies some other buttons while holding L2
[Layer.L2]
Tap R1 = TargetPC
Hold R1 = Consider
R3 = Add Duck layer
DPad = MouseWheel
Tap Start = Inventory
Hold Start = Toggle ToggleBags layer


###############################################################################
##	LOOK MODE
##
##	This mode can be accessed from any other mode by pressing Triangle.
##	It allows controlling the camera with the right thumbstick and move+strafe
##	with the left stick by activating Mouse Look mode (i.e. holding the right
##	mouse button down continuously). This allows for finer camera control than
##	mapping the right analog stick to the digital camera control keys.
##
##	Most importantly, it also gives access to the special slot-machine-style
##	Ability/Spell/Item/Hotbar "menu" (aka Ability List) controlled by D-pad,
##	with contained abilities/etc activated by pressing Triangle.
##
##	It can be helpful to directly target enemies by tapping Square without
##	leaving this mode (or depending on R1 target cycling), and to facilitate
##	that a reticle is displayed at center screen when in this mode. Square can
##	also be used to open doors. It only really works well in first-person mode
##	though, since otherwise you end up just clicking your own character...
##
##	If need to loot a body, can aim the reticle at it and tap R2, which will
##	right-click at center-screen to loot the body then switch to a special
##	version of Cursor Mode (Loot Mode).
###############################################################################

[Layer.LookMode]
Include = CurrentMode
Parent = CurrentMode
Mouse = Look
HUD = Show MouseLookAim
R2 = Add LootCenterScreen layer

[Layer.Abilities]
Parent = LookMode
HUD = Abilities
DPad = Select item in Abilities menu
Tap Triangle = Confirm current selection in Abilities menu
LongHold Triangle = Edit current selection in Abilities menu


###############################################################################
##	CURSOR MODE
##
##	This mode can be accessed in multiple ways, but the simplest is to press X.
##	It allows moving the mouse cursor using the right analog stick, while still
##	allowing movement with left stick (but turning instead of strafing).
##
##	It sets X to click the left mouse button, and R2 the right mouse button.
##	Use L2+X for alt-click, L1+X for ctrl-click, and R1+X for shift-click
##	(to get info, single item from stack, and full item stack respectively).
##
##	The D-Pad is used to quickly jump the mouse cursor to defined "hotspots"
##	(which is why the Abilities List is disabled in this mode), which can make
##	navigating some UI windows easier.
##
##	Simply holding L2 for a moment will display names of items in bags, etc. 
##	If need to left-click-and-drag, which is difficult while holding X since
##	your right thumb is on X instead of the stick, you can use L2+R2 to press
##	and hold the left mouse button and then move the cursor with RStick.
###############################################################################

[Layer.CursorMode]
Include = CurrentMode
Parent = CurrentMode
Mouse = Cursor
Hotspots = LootWindow
DPad = Select Hotspot or MouseWheel
PS_X = LMB
R1 = Hold CursorModeR1 layer
R2 = RMB

[Layer.TargetGroup+CursorMode]
PS_X = Ctrl+LClick

[Layer.CursorModeR1]
PS_X = Shift+LClick

[Layer.L2+CursorMode]
Include = L2
Auto = Add DelayedHoldAlt layer
R2 = LMB
PS_X = Alt+LClick
Press R1 = Remove DelayedHoldAlt layer
Press R2 = Remove DelayedHoldAlt layer
Press R3 = Remove DelayedHoldAlt layer
Press DPad = Remove DelayedHoldAlt layer
Press Start = Remove DelayedHoldAlt layer

[Layer.DelayedHoldAlt]
Parent = L2+CursorMode
LongHold Auto = Add HoldAlt layer

[Layer.HoldAlt]
Parent = DelayedHoldAlt
Auto = Alt


###############################################################################
##	LOOT MODE
##
##	This is a slightly modified version of Cursor Mode accessed by pressing R2
##	while in Look Mode to loot a body. It starts with an initial center-screen
##	right-click to attempt to loot, then jumps to the first slot of the loot
##	window when press any direction on the D-Pad. After that, the only change
##	from Cursor Mode is that moving forward automatically returns to Look Mode.
###############################################################################

[Layer.LootCenterScreen]
Parent = CurrentMode
Mouse = Cursor
Press Auto = Jump to CenterScreen, LClick, RClick, point at CenterScreen
Auto = Replace CurrentMode with LootMode

[Layer.LootMode]
Include = CursorMode
Press LStick Up = Replace CurrentMode with Abilities
Press Triangle = Replace CurrentMode with Abilities
# Move forward when exit w/ Triangle to auto-close loot window
Triangle = Move forward
DPad = Add LootModeHotspots layer

[Layer.LootModeHotspots]
Parent = LootMode
Auto = Move cursor to LootWindow1
DPad = Select Hotspot or MouseWheel


###############################################################################
##	TARGET GROUP
##
##	This is used when hold L1 to control targeting your group members
##	(your own character is considered Group Member #1 for group targeting).
##	Sadly, just repeatedly tapping L1 to cycle group members like in EQOA
##	doesn't really work because the overlay app has no way of knowing your
##	current group size (plus that method is slow with 5+ group members)!
##
##	Tap L1 to target a saved "default" target (initially yourself).
##	Hold L1 and use D-pad Up/Down to target prev/next group member,
##	with default target as starting point whenever initially press and hold L1.
##	L1+Right re-targets current group member (meaning may target their pet).
##	L1+Left sets the last group member targeted as new "default" when tap L1.
##	L1+R1 can be set to run an /assist macro by defining the Assist Key Bind.
###############################################################################

[Layer.TargetGroup]
# Disable any menus controls while this is active by using base face button
# settings (and assigning D-pad directly).
Include = BaseControls
HUD = Show TargetGroupLast and TargetGroupDefault
# Remove next line if want to start at last target instead of default target
Auto = Reset last key in TargetGroup array to default
DPad Up = Press previous key in TargetGroup array w/ wrapping
DPad Down = Press next key in TargetGroup array w/ wrapping
DPad Right = Re-press last key in TargetGroup array
DPad Left = Set TargetGroup array default to last key pressed
R1 = Assist


###############################################################################
##	MACROS MENU
##
##	This is used when tap L2 to display/control Macros (aka Quick Chat) menu.
##	Basically, each command is assigned a sequence of direction presses, by
##	virtue of D-pad taps instantly selecting and confirming the command or
##	sub-menu in the direction pressed.
##
##	Edit/add/remove macros/sub-menus by holding a direction for a time.
##
##	You can repeatedly use the same macro by pressing and holding L2 again
##	(after tapping it to bring up the menu initially) which prevents the menu
##	from closing when selecting an option with the D-pad. You can also use
##	the face buttons as an alternate to the D-pad when doing this, allowing
##	you to spam a macro while still being able to steer with LStick (for, say,
##	using a drag corpse macro).
###############################################################################

[Layer.Macros]
Include = BaseControls
HUD = Macros
Auto = Reset Macros menu
Tap DPad = Choose option in Macros menu, then close it
LongHold DPad = Edit Macros menu option in direction
Tap Circle = Back, or close out of Macros menu
Press Triangle = Remove this layer
Press PS_X = Remove this layer
Press Start = Remove this layer

[Layer.L2+Macros]
Press DPad = Remove DelayedHoldAlt layer
DPad = Choose option in Macros menu
FPad = Choose option in Macros menu

[Layer.L2+CursorMode+Macros]
Auto = Remove DelayedHoldAlt layer
FPad = Choose option in Macros menu


###############################################################################
##	MAIN MENU
##
##	Press Start/Options/whatever to bring up the Main Menu controlled here.
##	D-pad Up/Down scrolls through the menu options. Use X to confirm, and
##	Circle to back out of a sub-menu or to close the menu entirely.
##
##	Some menu options will open an in-game UI window, like your Inventory.
##	To interact with these, pressing RStick in any direction will exit the
##	menu and start Cursor Mode. Because of this, Mouse Look mode is disabled
##	and you must use LStick to turn while using this menu.
###############################################################################

[Layer.MainMenu]
Include = BaseControls
Parent = CursorMode
HUD = MainMenu
Mouse = Hide
Auto = Reset MainMenu
DPad = Select in MainMenu using wrapping
PS_X = Confirm current selection in MainMenu
LongHold PS_X = Edit current selection in MainMenu
Tap Circle = Back, or close out of MainMenu
Tap L2 = Replace this layer with Macros
RStick = Remove this layer
R2 = Remove this layer
Start = Remove this layer


###############################################################################
##	MEMORIZE SPELLS
##
##	Accessible from the main menu, this special menu allows for faster spell
##	memorization than just using Cursor Mode controls, by using the DPad to
##	quickly select a spell and then a spell slot to memorize it to (first
##	forgetting whatever was already in that slot).
##
##	If the book was already open, starting this menu might close it - simply
##	tap LStick Down to bring it back again. You can also use LStick L/R or
##	L1/R1 to flip through the spell book pages. Since the mouse cursor will
##	move with the menu selection, you can quickly abort memorizing and start
##	re-organizing instead by using R2 to right-click and return to Cursor Mode.
###############################################################################

[Layer.MemSpells]
Parent = MainMenu
HUD = MemSpells, MemSpellSlots
Mouse = Cursor
Press Auto = Add Book layer
Auto = Reset MemSpells with mouse
LStick Up = Remove this layer
LStick Left = BookPrevPage
LStick Right = BookNextPage
LStick Down = Book
DPad = Select in MemSpells w/ wrap & mouse
PS_X = Confirm MemSpells w/ click
Press Circle = Remove this layer
Press Triangle = Replace CurrentMode with Abilities
Square = Do nothing
L1 = BookPrevPage
R1 = BookNextPage
Tap L2 = Toggle Macros layer
Press R2 = Replace CurrentMode with CursorMode
R2 = RMB
L3 = Replace this layer with AutoRun
# Use move forward to close spell book without risk of opening instead
Circle = Move forward
Triangle = Move forward

[Layer.MemSpellSlots]
Parent = MemSpells
HUD = MemSpellSlots
Mouse = Hide
DPad = Select in MemSpellSlots w/ wrap
Press PS_X = Confirm MemSpellSlots
PS_X = Remove this layer
Tap Circle = Remove this layer


###############################################################################
##	AUTO-RUN
##
##	While the game has a built-in Auto-Run and could just assign to press that
##	key, it is easy to accidentally drop out of Auto-Run by pressing forward on
##	the left analog stick while steering or while pressing L3. So this layer
##	fixes that by making it so forward on the LStick doesn't stop it.
###############################################################################

[Layer.AutoRun]
Auto = Move forward
LStick Left = Move left
LStick Right = Move right
LStick Up = Hold AutoRunForward layer
LStick Down = Remove this layer
LStick Down Threshold = 75

# If forget are auto-running already and hold forward + L3, don't stop running
[Layer.AutoRunForward]
L3 = Do nothing


###############################################################################
##	UTILITY LAYERS
##	
##	These are some fire-and-forget layers that mostly exist to execute
##	multiple commands at once by using Add/Toggle/Replace Layer commands
###############################################################################

# This allows combining OpenBags and CloseBags into a single "Toggle Bags"
[Layer.ToggleBags]
Press Auto = OpenBags
Release Auto = CloseBags

# These are used to allow cancelling AutoRun when these commands are used
[Layer.Sit]
Press Auto = Sit
Auto = Remove this layer
[Layer.AutoRun+Sit]
Auto = Remove AutoRun layer

[Layer.Duck]
Press Auto = Duck
Auto = Remove this layer
[Layer.AutoRun+Duck]
Auto = Remove AutoRun layer

[Layer.Book]
Press Auto = Book
Auto = Remove this layer
[Layer.AutoRun+Book]
Auto = Remove AutoRun layer

# These are used to force un-hide the mouse before exit the game
[Layer.Camp]
Parent = CurrentMode
Press Auto = Camp
Auto = Replace CurrentMode with CursorMode

[Layer.CampDesktop]
Parent = CurrentMode
Press Auto = CampToDesktop
Auto = Replace CurrentMode with CursorMode

[Layer.QuickExit]
Parent = CurrentMode
Press Auto = QuickExit
Auto = Replace CurrentMode with CursorMode


###############################################################################
##	HUD ELEMENTS
###############################################################################

[HUD.MouseLookAim]
Type = Dot
Position = CX, CY
Alignment = CX, CY
ItemSize = 6, 6
BorderSize = 0
ItemRGB = 255, 255, 255
MaxAlpha = 128

[HUD.TargetGroupLast]
Type = KeyBindArrayLast
KeyBindArray = TargetGroup
Position = 55, 0
Size = 10, 10
ItemType = LeftArrow
BorderSize = 2
BorderRGB = 10, 10, 10
ItemRGB = 40, 240, 40
FadeOutDelay = 500
FadeOutTime = 650

[HUD.TargetGroupDefault]
Type = KeyBindArrayDefault
KeyBindArray = TargetGroup
Position = -55, 0
Size = 10, 10
ItemType = Circle
BorderSize = 2
BorderRGB = 10, 10, 10
ItemRGB = 40, 240, 40
FadeInDelay = 500
FadeInTime = 125
FadeOutDelay = 500
FadeOutTime = 650
InactiveAlpha = 0
InactiveDelay = 2000


###############################################################################
##	MENUS
###############################################################################

[Menu.MainMenu]
Style = List
Title = Menu
Position = 60, 5
Alignment = L, T
ItemType = RoundRect
ItemSize = 90, 45
Radius = 15
FadeInTime = 125
FadeOutTime = 250
1 = Windows
2 = Mem Spells: Add MemSpells layer
3 = Group
4 = Settings
5 = Quit

[Menu.MainMenu.Windows]
1 = Inventory: Inventory
2 = Bags: Toggle ToggleBags layer
3 = Book: Add Book layer
4 = Cursor Mode: Close menu

[Menu.MainMenu.Group]
1 = Invite: Invite
2 = Disband: Disband

[Menu.MainMenu.Settings]
1 = Options: OptionsMenu
2 = Toggle Windowed: SwapWindowMode
3 = Profile: Change Profile

[Menu.MainMenu.Quit]
1 = Sit: Add layer Sit
2 = Camp: Add Camp layer
3 = Desktop: Add CampDesktop layer
4 = Fast Quit
5 = Close Overlay

[Menu.MainMenu.Quit.Fast Quit]
1 = Cancel: ..
2 = Confirm: Add QuickExit layer
 
[Menu.MainMenu.Quit.Close Overlay]
1 = Cancel: ..
2 = Confirm: Quit App

[Menu.Abilities]
Style = Slots
Title = Spells (1)
TitleHeight = 32
AltLabelWidth = 112
Position = R, T+60
ItemType = Rect
ItemSize = 48, 48
Alignment = R, T
SelectedBorderRGB = 230, 126, 34
FadeInTime = 125
FadeOutTime = 250
L = Hotbar (2)
R = Spells (2)
1 = Spell1: CastSpell1
2 = Spell2: CastSpell2
3 = Spell3: CastSpell3
4 = Spell4: CastSpell4

[Menu.Abilities.Spells (2)]
L = ..
R = .Hotbar (1)
1 = Spell5: CastSpell5
2 = Spell6: CastSpell6
3 = Spell7: CastSpell7
4 = Spell8: CastSpell8

[Menu.Abilities.Hotbar (1)]
Auto = HotPage1
L = .Spells (2)
R = .Hotbar (2)
1 = Hotbar1: HotButton1
2 = Hotbar3: HotButton3
3 = Hotbar5: HotButton5
4 = Hotbar7: HotButton7

[Menu.Abilities.Hotbar (2)]
Auto = HotPage1
L = .Hotbar (1)
R = ..
1 = Hotbar2: HotButton2
2 = Hotbar4: HotButton4
3 = Hotbar6: HotButton6
4 = Hotbar8: HotButton8

[Menu.MemSpells]
Style = Grid
GridWidth = 4
Position = 279, 180
ItemSize = 86 x 67
TitleHeight = 0
# Use transparent color as BG color so just border
ItemRGB = 255, 0, 255
BorderSize = 0
SelectedBorderSize = 3
1 = : Add MemSpellSlots
2 = : Add MemSpellSlots
3 = : Add MemSpellSlots
4 = : Add MemSpellSlots
5 = : Add MemSpellSlots
6 = : Add MemSpellSlots
7 = : Add MemSpellSlots
8 = : Add MemSpellSlots
9 = : Add MemSpellSlots
10= : Add MemSpellSlots
11= : Add MemSpellSlots
12= : Add MemSpellSlots
13= : Add MemSpellSlots
14= : Add MemSpellSlots
15= : Add MemSpellSlots
16= : Add MemSpellSlots

[Menu.MemSpellSlots]
Style = Grid
GridWidth = 2
TitleHeight = 0
Position = R, T+60
ItemType = Rect
ItemSize = 48, 48
Alignment = R, T
SelectedBorderRGB = 230, 126, 34
FadeInTime = 125
FadeOutTime = 250
1 = Spell1: RClick SpellSlot1, wait 300, Alt-1
2 = Spell5: RClick SpellSlot5, wait 300, Alt-5
3 = Spell2: RClick SpellSlot2, wait 300, Alt-2
4 = Spell6: RClick SpellSlot6, wait 300, Alt-6
5 = Spell3: RClick SpellSlot3, wait 300, Alt-3
6 = Spell7: RClick SpellSlot7, wait 300, Alt-7
7 = Spell4: RClick SpellSlot4, wait 300, Alt-4
8 = Spell8: RClick SpellSlot8, wait 300, Alt-8

[Menu.Macros]
Style = 4Dir
ItemType = Rect
Position = 50%, 36
ItemSize = 230, 40
FontSize = 16
FontWeight = 700
BorderSize = 4
Alignment = C, T
Priority = 5
FadeInTime = 125
FadeOutTime = 250
U = Hold: Do nothing
L = Direction: Do nothing
R = To: Do nothing
D = Set: Do nothing
